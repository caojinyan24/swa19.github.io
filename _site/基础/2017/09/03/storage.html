<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>前端开发之Cookie，sessionStorage和localStorage - </title>
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/index.css">
	<link rel="stylesheet" href="/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/css/syntax.css">
	<link rel="canonical" href="/%E5%9F%BA%E7%A1%80/2017/09/03/storage.html">
	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
	<meta name="keywords" content="前端开发之Cookie，sessionStorage和localStorage, , ">
	<meta name="description" content="">
	<script src="/js/jquery.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/html5shiv.js"></script>
	<script src="/js/holder.min.js"></script>
	<script src="/js/respond.js"></script>
	<script src="/js/application.js"></script>
	<script src="/js/lessismore.js"></script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

<body class="index">

<header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">主页</a>
        </li>
        <li>
          <a href="/categories/">类别</a>
        </li>
        <li>
          <a href="/tags">标签</a>
        </li>
      </ul>

    </nav>
  </div>

</header>
<div class="docs-header" id="content">
  <div class="container">
  	
		    <h1></h1>
      <p>不积跬步，无以至千里</p>
      
  </div>
</div>
<!---->
<!--<div class="banner">
    <div class="container">
        
        <a href="/categories/#基础-ref">基础</a>
        /
        <a href="/tags/#web-ref">web</a>
        
    </div>
</div>
-->
<!---->

<div class="container docs-container">
    <div class="row">
        <div class="col-md-3">
        <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
    <h1>目录</h1>
    <ul class="nav sidenav">
        
        
        
        
        
        
        <li><a href="#year_2019">2019</a>
            <ul class="nav">
                <li><a href="#month_2019_02">02</a></li>
                
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
    </ul>
    </li>
    <li><a href="#year_2018">2018</a>
        <ul class="nav">
            <li><a href="#month_2018_11">11</a></li>
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_10">10</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_09">09</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_08">08</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_07">07</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_06">06</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_05">05</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_04">04</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_03">03</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_02">02</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2018_01">01</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
    </ul>
    </li>
    <li><a href="#year_2017">2017</a>
        <ul class="nav">
            <li><a href="#month_2017_12">12</a></li>
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2017_11">11</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2017_09">09</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
        
            
            <li><a href="#month_2017_08">08</a></li>
            
            
            
            
        
        
        
        
        
                
        
            
            
            
            
        
        
        
        
        
                
            </ul>
        </li>
        
            
        </ul>
</div>



        </div>
        </div>
        <div class="col-md-9" role="main">
            <div class="panel docs-content">
            <div class="wrapper">
                <header class="post-header">
                    <h1 class="post-title">前端开发之Cookie，sessionStorage和localStorage</h1>
                    <div class="meta"><span class="postdate">2017-09-03 22:49:03</span></div>
                    <br/>
                </header>
                <article class="post-content">
                    <ul id="markdown-toc">
  <li><a href="#保存会话信息的方式有哪些" id="markdown-toc-保存会话信息的方式有哪些">保存会话信息的方式有哪些</a></li>
  <li><a href="#实际应用" id="markdown-toc-实际应用">实际应用</a>    <ul>
      <li><a href="#sessionstorage" id="markdown-toc-sessionstorage">sessionStorage</a></li>
      <li><a href="#localstorage" id="markdown-toc-localstorage">localStorage</a></li>
    </ul>
  </li>
  <li><a href="#其他" id="markdown-toc-其他">其他</a></li>
  <li><a href="#参考" id="markdown-toc-参考">参考：</a></li>
</ul>

<p>JavaScript开发过程中,有时候需要把上一次的请求信息保存下来，并在接收到下一个请求之后，取出保存的信息做处理。这里没有使用后端服务器开发中常用的数据库或是redis等持久化工具，而是使用了sessionStorage，正好加强下基础知识</p>

<p>为什么需要保存会话信息–</p>

<p>HTTP协议本身是无状态的，客户端到服务器之间的每个请求都是独立的。但是很多时候，我们是需要在浏览器和服务器之间携带一些会话信息的，如为了避免重复登录，我们会使用浏览器的记住密码，这样浏览器的cookie中会记录用户名密码，请求服务器时根据cookie中的用户名密码做认证；同时对已登录的用户，服务器端会保存session，并将sessionid存入cookie，服务器端接收请求取出sessionid查看用户是否已是登录状态，从而避免再次登录</p>

<h1 id="保存会话信息的方式有哪些">保存会话信息的方式有哪些</h1>

<p>会话信息可以保存在cookie和session中，这两个的区别是：cookie是存放在浏览器端的，并保存在浏览器端；</p>

<p>而session是由服务端产生，并保存在服务器端，其中sessionid会被放入cookie中，浏览器每次向服务器发起请求时，会把cookie放入报文头部，而session的sessionid就保存在cookie中，服务器端接收到请求之后，取出cookie，并根据cookie中的sessionid取出服务器中的session</p>

<h1 id="实际应用">实际应用</h1>

<p>看下存储在浏览器端的网络存储技术，目前可用的有Cookie，sessionStorage,localStorage,但由于Cookie要求的数据大小有限制，且易用性不好，目前常用的就是HTML5提供的技术有localStorage和sessionStorage，这两个都会提供一个浏览器端数据存储的功能，但区别是：</p>

<ul>
  <li>localStorage：存储的信息会一直保存，不会过期</li>
  <li>sessionStorage：每个信息的有效期是一个会话周期，每次打开一个浏览器页面都会创建一个会话，刷新页面会话信息依旧存在，但关闭页面之后，此会话结束，本次会话保存的sessionStorage信息也会随之清除</li>
</ul>

<h2 id="sessionstorage">sessionStorage</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//获取sessionStorage
var sessionStorate=Window.sessionStorage;
//保存数据
 sessionStorage.setItem('key', 'value');
//获取数据
var data = sessionStorage.getItem('key');
// 删除数据
sessionStorage.removeItem('key');
//删除sessionStorage中的所有数据
sessionStorage.clear();

</code></pre></div></div>

<h2 id="localstorage">localStorage</h2>

<p>操作和sessionStorage类似</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//取得变量
localStorage = window.localStorage;
//保存数据
localStorage.setItem('key','value');
//取得数据
var data=localStorage.getItem('value');
//删除数据
localStorate.removeItem('key');
</code></pre></div></div>

<h1 id="其他">其他</h1>

<p>网上找到的一个Cookie，sessionStorage，localStorage的对比，总结的很好</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">特性</th>
      <th style="text-align: center">Cookie</th>
      <th style="text-align: center">localStorage</th>
      <th style="text-align: center">sessionStorage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">数据的生命期</td>
      <td style="text-align: center">可设置失效时间，默认是关闭浏览器后失效</td>
      <td style="text-align: center">除非被清除，否则永久保存</td>
      <td style="text-align: center">仅在当前会话下有效，关闭页面或浏览器后被清除</td>
    </tr>
    <tr>
      <td style="text-align: center">存放数据大小</td>
      <td style="text-align: center">4K左右</td>
      <td style="text-align: center">一般为5MB</td>
      <td style="text-align: center">一般为5MB</td>
    </tr>
    <tr>
      <td style="text-align: center">与服务器端通信</td>
      <td style="text-align: center">每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题</td>
      <td style="text-align: center">仅在客户端（即浏览器）中保存，不参与和服务器的通信</td>
      <td style="text-align: center">仅在客户端（即浏览器）中保存，不参与和服务器的通信</td>
    </tr>
    <tr>
      <td style="text-align: center">易用性</td>
      <td style="text-align: center">需要程序员自己封装，源生的Cookie接口不友好</td>
      <td style="text-align: center">源生接口可以接受，亦可再次封装来对Object和Array有更好的支持</td>
      <td style="text-align: center">源生接口可以接受，亦可再次封装来对Object和Array有更好的支持</td>
    </tr>
  </tbody>
</table>

<h1 id="参考">参考：</h1>

<p><a href="http://jerryzou.com/posts/cookie-and-web-storage/">详说 Cookie, LocalStorage 与 SessionStorage</a></p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API">Web Storage API</a></p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">Window.localStorage</a></p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage">Window.sessionStorage</a></p>

                </article>
                </div>
            </div>
        </div>
    </div>
</div>


<footer class="footer" role="contentinfo">
	<div class="container">
		<div class="footer-col-wrapper">
			<div class="footer-col footer-col-2">
				<ul class="social-media-list">
					
					<li>
						<a href="https://github.com/swa19"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">swa19</span></a>

					</li>
					
				</ul>
			</div>
			<div class="footer-col footer-col-3">
				<p>我不是个伟大的程序员，我只是个有着一些优秀习惯的好程序员--by Kent Beck</p>
			</div>
		</div>
	</div>
</footer>


</body>
</html>