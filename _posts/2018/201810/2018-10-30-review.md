---
layout: post
title:  "总结汇总"
date:   2018-10-30 16:00:58 +0800
categories: 小结
tags: review
---

# 开发

* 考虑问题的角度
背景:在系统中维护了一个本地缓存,在最开始的设计中,考虑到更新操作并不频繁,为了减轻系统不必要的消耗,考虑在redis中维护一个时间戳,每次更新时更新这个时间戳;每次查询时,检查本地缓存的时间戳,并跟redis中的时间戳做比对,不相同的话调rpc接口更新本地缓存;在实际运行中发现,从rpc中并不能获取到实时更新后的数据,导致本地缓存更新的时候并不能拿到最新的数据.

对于本地缓存的更新,有两种方案:
1. 定时更新
2. 只有存在更新的时候更新,当有多个实例时,需要考虑多实例的同步问题,可以考虑在redis中集中保存一个缓存的时间戳
不同的方案各有优缺点:
1. 定时更新
简单粗暴,具有容错性,但更新存在滞后性
2. 一次更新
实现更复杂,可以及时把更新同步到本地缓存;但如果更新的途径未做收敛的话会导致其他途径做出的修改无法同步到本地的缓存中

在考虑哪种方案更好的时候,还是要结合业务特性,考究哪种方式导致的问题更易接受.很多时候限制实现的并不是性能问题,而是业务需求.
